<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Boxicons -->
	<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
	<link
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
rel="stylesheet"
/>
<!-- Google Fonts -->
<link
href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
rel="stylesheet"
/>
<!-- MDB -->
<link
href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.2/mdb.min.css"
rel="stylesheet"
/>
	<!-- My CSS -->
	<link rel="stylesheet" href="css/admindash.css">

	<title>Redstore</title>
	<style>
 .custom-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .popup-content {
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 400px; /* Adjust the width as needed */
            width: 80%;
        }

        #popup-message {
            margin-bottom: 20px;
            font-size: 1.2em;
        }

        .button-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        button {
            background-color: #4CAF50;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
        }

        button:hover {
            background-color: #45a049;
        }
	</style>
</head>
<body>


	<!-- SIDEBAR -->
	<section id="sidebar">
		<a href="/admin-dash" class="brand">
			<i class='bx bxs-smile'></i>
			<span class="text">Redstore</span>
		</a>
		<ul class="side-menu top">
			<li >
				<a href="/admin-dash">
					<i class='bx bxs-dashboard'></i>
					<span class="text">Dashboard</span>
				</a>
			</li>

			<li>
				<a href="/admin-products">
					<i class='bx bxs-message-dots' ></i>
					<span class="text">Products</span>
				</a>
			</li>
			
			<li>
				<a href="/admin-order">
					<i class='bx bxs-doughnut-chart' ></i>
					<span class="text">Orders</span>
				</a>
			</li>
			
			<li>
				<a href="/admin-order">
					<i class='bx bxs-group' ></i>
					<span class="text">Users</span>
				</a>
			</li>
			<li>
				<a href="/admin-category">
					<i class='bx bxs-doughnut-chart'></i>
					<span class="text">Category</span>
				</a>
			</li>
		</ul>
		<ul class="side-menu">
			<!-- <li>
				<a href="#">
					<i class='bx bxs-cog' ></i>
					<span class="text">Settings</span>
				</a>
			</li> -->
			<li>
				<a href="/adminlogin" class="logout">
					<i class='bx bxs-log-out-circle' ></i>
					<span class="text">Logout</span>
				</a>
			</li>
			
		</ul>
	</section>
	<!-- SIDEBAR -->



	<!-- CONTENT -->
	<section id="content">
		<!-- NAVBAR -->
		<nav>
			<i class='bx bx-menu' ></i>
			<a href="#" class="nav-link">Categories</a>
			<form action="#">
				<div class="form-input">
					<input type="search" placeholder="Search...">
					<button type="submit" class="search-btn"><i class='bx bx-search' ></i></button>
				</div>
			</form>
			<input type="checkbox" id="switch-mode" hidden>
			
			<a href="#" class="notification">
				<i class='bx bxs-bell' ></i>
				<span class="num">8</span>
			</a>
			<a href="#" class="profile">
				<img src="img/people.png">
			</a>
		</nav>
		<!-- NAVBAR -->


		

			


			

<main>
<section>
	<div style="width: 100%;display: flex; justify-content: right;">
		
			<label for=>Category</label>
			<form action="/filter" method="post" style="width: 100%;">
				<select class="form-control" id="category" name="category">
					<% for(var i = 0; i < cat.length; i++) { %>
						<option value="<%= cat[i].catname%>" <%= product.category === 'cat[i].catname' ? 'selected' : '' %>><%= cat[i].catname%></option>
						<% } %>
	
				</select>
				<button type="submit" style="border: 0px; background-color: rgba(255, 255, 255, 0);">
					<a  style="background-color: rgb(245, 234, 234);" class="btn border-shadow update">
						<p style="padding: 0px;margin: 0px; color: rgb(0, 0, 0);">Filter</p>
					</a>
				</button>
				
			</form>
			
		
	</div>
    <div class="container my-5">
      <header class="mb-4">
        <h3>New products</h3>
		<div style="width: 100%;height: 20px;"></div>
        <a href="/addproduct" style="background-color: rgb(245, 234, 234);" class="btn border-shadow update">
          <p style="padding: 0px;margin: 0px; color: rgb(0, 0, 0);"">ADD Products</p>
      </a>
	  <a href="/deleted-items" style="background-color: rgb(245, 234, 234);" class="btn border-shadow update">
		<p style="padding: 0px;margin: 0px; color: rgb(0, 0, 0);"">Deleted items</p>
	</a>
      </header>
	  <div style="display: flex; justify-content: center; width: 100%; align-items: center;">
                    
		<div style="width: 100%; " >
		<input type="text" name="name" placeholder="Search Here" id="name-search"  style="width: 30%;
		padding: .6em 1em;
		margin: .5em 0;
		border: 1px solid gray;
		font-family: 'Barlow', sans-serif;
		font-size: 1em;
		border-radius: 10px;">
		<i class="fa fa-search"></i>
	</div>
	</div>
	  <table class="table">
		<thead class="thead-dark">
			<tr>
				<th>ID</th>
				<th>Image</th>
				<th>Name</th>
				<th>price</th>
				
				<th>addimage</th>
				<th>delete</th>
				<th>update</th>
			</tr>
		</thead>
		<tbody>
			<% for(var i = 0; i < product.length; i++) { %>
				<tr>
					<td><%= i + 1 %></td>
					<td><img src="primg/<%=product[i].image[0]%>" class="card-img-top" style="aspect-ratio: 1 / 1;height: 50px; width: 50px;" /></td>
					<td><h5 class="card-title"><%=product[i].productName%></h5></td>
					<td><p class="card-text">â‚¹<%=product[i].price%></p></td>
					<td><a href="/uplaod?id=<%=product[i]._id%>" class="btn btn-primary shadow-0 me-1">ADD IMAGE</a></td>
					<td><a href="javascript:void(0);"  class="btn btn-light border px-2 pt-2 icon-hover" onclick="if(confirmDelete('<%=product[i]._id%>')) window.location.href = '/api/deleteproduct?id=<%=product._id%>';"><i class="fas fa-trash fa-lg text-secondary px-1"></i></a></td>
					<td><a href="/updatepage?id=<%=product[i]._id%>" class="btn btn-light border px-2 pt-2 icon-hover"><i class="fas fa-pencil fa-lg text-secondary px-1"></i></a></td>
				</tr>
				<% } %>
		</tbody>
      
    </div>
</main>
<!-- MAIN -->
</section>
<div class="custom-popup" id="deletePopup">
    <div class="popup-content">
        <p id="popup-message">Are you sure you want to delete this product?</p>
        <div class="button-container">
            <button onclick="proceedDelete()">Yes, Delete</button>
            <button onclick="closePopup()">Cancel</button>
        </div>
    </div>
</div>
<!-- CONTENT -->

<script>
	 function confirmDelete(id) {
        // Show delete popup
        document.getElementById('deletePopup').style.display = 'flex';
        // Save the id to use it in proceedDelete
        window.currentProductId = id;
    }

    function closePopup() {
        // Close the delete popup
        document.getElementById('deletePopup').style.display = 'none';
    }

    function proceedDelete() {
        window.location.href = `/api/deleteproduct?id=${currentProductId}`;
        closePopup();
    }

</script>

<script src="js/adminserver.js"></script>
<script src="/js/searchproduct.js"></script>
</body>
</html>
